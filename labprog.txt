Simulate a three nodes point-to-point network with duplex links between them. Set
the queue size vary the bandwidth and find the number of packets dropped
#create simulator

set ns [new Simulator]

#open Trace file and NAM file 

set ntrace [open P1.tr w]
$ns trace-all $ntrace
set namfile [open P1.nam w] 
$ns namtrace-all $namfile

#create 3 nodes

set n0 [$ns node]
set n1 [$ns node]
set n2 [$ns node]

#create duplex link b/w the nodes

#you need to modify the bandwidth to observe the variation in pkts drop

$ns duplex-link $n0 $n1 0.75Mb 10ms DropTail 
$ns duplex-link $n1 $n2 100Mb 10ms DropTail

#set queue size

#you can modify the queue length as well to observe variation in packet drops

$ns queue-limit $n0 $n1 10 
$ns queue-limit $n1 $n2 10

#set up a transport layer connection 

set udp [new Agent/UDP]
$ns attach-agent $n0 $udp
set null [new Agent/Null]
$ns attach-agent $n2 $null
$ns connect $udp $null

#set up an application layer traffic 

set cbr0 [new Application/Traffic/CBR]
$cbr0 set type_ CBR
$cbr0 set packetSize_ 100
$cbr0 set rate_ 1Mb
$cbr0 set random_ false
$cbr0 attach-agent $udp

#finish procedure

proc finish {} { 
global ns ntrace namfile

#dump all trace data and close the files 

$ns flush-trace
close $ntrace
close $namfile

#execute the NAM Animation file 
exec nam P1.nam &

#show the number of
exec echo "the no of pkts dropped is" & 
exec grep -c "^d" P1.tr & 
exit 0 
}

#schedule events

$ns at 0.0 "$cbr0 start"
$ns at 4.5 "$cbr0 stop"
$ns at 5.0 "finish"

#run the simulation

$ns run


///
Simulate a four-node point-to-point network, and connect the links as follows: n0-n2, n1-
n2 and n2-n3. Apply TCP agent between n0-n3 and UDP n1-n3. Apply relevant
applications over TCP and UDP agents changing the parameter and determine the
number of packets sent by TCP/UDP.

set ns [new Simulator]
set ntrace [open P2.tr w]
$ns trace-all $ntrace
set namfile [open P1.nam w]
$ns namtrace-all $namfile
proc finish {} {
global ns ntrace namfile 
$ns flush-trace
close $ntrace 
close $namfile
exec nam P2.nam &
exec echo "The no. of TCP packets send are" &
exec grep "^+" P2.tr | cut -d " " -f 5 | grep -c "tcp" &
exec echo "The no. of UDP packets send are" &
exec grep "^+" P2.tr | cut -d " " -f 5 | grep -c "cbr" &
exit 0
}

set n0 [$ns node]
set n1 [$ns node]
set n2 [$ns node]
set n3 [$ns node]
$ns duplex-link $n0 $n2 2Mb 10ms DropTail
$ns duplex-link $n1 $n2 2Mb 10ms DropTail
$ns duplex-link $n2 $n3 0.75Mb 20ms DropTail

set tcp0 [new Agent/TCP]
$ns attach-agent $n0 $tcp0
set sink0 [new Agent/TCPSink]
$ns attach-agent $n3 $sink0
$ns connect $tcp0 $sink0

set ftp0 [new Application/FTP]
$ftp0 set type_ FTP
$ftp0 attach-agent $tcp0

set udp0 [new Agent/UDP]
$ns attach-agent $n1 $udp0
set null0 [new Agent/Null]
$ns attach-agent $n3 $null0
$ns connect $udp0 $null0

set cbr0 [new Application/Traffic/CBR]
$cbr0 set type_ CBR
$cbr0 set packetSize_ 1000
$cbr0 set rate_ 0.01Mb
$cbr0 set random_ false
$cbr0 set attach-agent $udp0

$ns at 0.1 "cbr0 start"
$ns at 6.0 "ftp0 start"
$ns at 5.0 "cbr0 stop"
$ns at 10.0 "ftp0 stop"
$ns at 11.0 "finish"

$ns run 

///
Simulate an Ethernet LAN using N nodes. Determine collision across different nodes

set ns [new Simulator]
set ntrace [open P3.tr w]
$ns trace-all $ntrace
set namfile [open P3.nam w]
$ns namtrace-all $namfile
proc finish{} {
global ns ntrace namfile
$ns flush-trace 
close $ntrace
close $namfile

exec nam P3.nam &
exec echo "the no of tcp pkts dropped due to collision is" &
exec grep -c "^d" P3.tr &
exit 0

set n0 [$ns node]
set nl [$ns node] 
set n2 [$ns node]
set n3 [Sns node] 
set n4 [$ns node]
set n5 [$ns node]
set lan [$ns newLan "$ne $n1 $n2 $n3 $n4 $n5" 5Mb 10ms LL Queue/DropTail channel]

set tcp [new Agent/TCP)
$ns attach-agent $n0 $tcp 
set sink [new Agent/TCPSink]
$ns attach-agent $n2 $sink
$ns connect $tcp $sink

set ftp [new Application/FTP] 
$ftp attach-agent $tcp

set udp [new Agent/UDP
$ns attach-agent $n1 $udp
set null (new Agent/Null] 
$ns attach-agent $n3 $null
$ns connect $udp $null

set cbr [new Application/Traffic/CBR]
$cbr attach-agent $udp

$ns at 0.1 "$cbr start"
$ns at 2.0 "$ftp start"
$ns at 1.9 "Scbr stop"
$ns at 4.3 "$ftp stop"
$ns at 6.0 "finish"

$ns run





